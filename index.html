<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nephelocentaurus Config</title>
  <style>
    @font-face {
      font-family: 'CustomFont';
      src: url('/font.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
	  @font-face {
      font-family: 'GithubCustomFont';
      src: url('font.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
	      @font-face {
      font-family: 'BoldCustomFont';
      src: url('/font.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
	  @font-face {
      font-family: 'BoldGithubCustomFont';
      src: url('font.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    :root {
      --primary-color: #24936E;
      --background-color: #080808;
      --surface-color: #1C1C1C;
      --text-color: #E0E0E0;
      --secondary-text-color: #A0A0A0;
      --input-background: #2C2C2C;
    }

    body {
      font-family: 'CustomFont', 'GithubCustomFont','BoldCustomFont', 'BoldGithubCustomFont','Poppins', 'Open Sans', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
    }

    #container {
      max-width: 100%;
      margin: 0 auto;
    }

    .top-bar {
      background-color: var(--surface-color);
      color: var(--text-color);
      padding: 16px;
      text-align: center;
    }

    .top-bar h1 {
      margin: 0px;
      font-size: 32px;
      font-weight: 2400;
    }

    .content {
      padding: 24px;
    }
    .content h2 {
      margin: 0px;
      font-size: 32px;
      font-weight: 2400;
		font-family: 'BoldCustomFont', 'BoldGithubCustomFont','Poppins','Open Sans', sans-serif;
    }
.location-container {
  border: 1px solid var(--primary-color);
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
  background-color: var(--surface-color);
}

.location-container h3:first-child {
  margin-top: 0;
}

.location-container p {
  margin-bottom: 0;
}
	  #toggleRadioStreams {
  background-color: var(--primary-color);
  color: white;
  margin-bottom: 15px;
  float: center;
		        font-family: inherit;
      padding: 14px 20px;
      margin: 24px 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      transition: background-color 0.3s;
      font-weight: 600;
      font-family: inherit;
}

#toggleRadioStreams:hover {
  background-color: #7C4DFF;
}
    h2, h3 {
      color: var(--primary-color);
      margin-top: 32px;
      font-weight: 2400;
    }
h3 {
  margin-bottom: 2px; /* Reduce bottom margin */
}

input[type="text"] {
  margin: 0 0 2px 0; /* Reduce top margin, keep bottom margin */
}

label {
  margin-top: 36px; /* Increase top margin to separate sections */
}
    input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      margin: 8px 0;
      box-sizing: border-box;
      border: none;
      border-radius: 8px;
      background-color: var(--input-background);
      color: var(--text-color);
      font-size: 16px;
      font-family: inherit;
    }

    input::placeholder {
      color: var(--secondary-text-color);
    }

    input[type="submit"], .dialog-button {
      background-color: var(--primary-color);
      color: white;
      padding: 14px 20px;
      margin: 24px 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      transition: background-color 0.3s;
      font-weight: 600;
      font-family: inherit;
    }

    input[type="submit"]:hover, .dialog-button:hover {
      background-color: #7C4DFF;
    }
.header-bar {
  background-color: #1C1C1C;
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 1;
  align-items: center;
	padding: 16px;
      text-align: center;
}

.header-bar h2 {
  color: #fff;
  margin-bottom: 0;
}

.header-bar select {
  background-color: #2c3e50;
  color: #fff;
  border: none;
  padding: 0.5rem;
  font-size: 1rem;
  cursor: pointer;
}
    .info-box {
      background-color: var(--surface-color);
      border-left: 4px solid var(--primary-color);
      padding: 16px;
      margin: 16px 0;
      border-radius: 8px;
      text-align: center;
    }

    .warning {
      font-size: 14px;
      color: var(--secondary-text-color);
    }

    .currency-inputs {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .currency-inputs input {
      flex: 1;
    }

    label {
      display: block;
      margin-top: 16px;
      color: var(--text-color);
      font-weight: 600;
    }

    .dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .dialog-content {
      background-color: var(--surface-color);
      padding: 24px;
      border-radius: 12px;
      text-align: center;
      max-width: 80%;
    }

    @media (min-width: 640px) {
      #container {
        max-width: 640px;
      }
    }
  </style>
</head>

<body>
		    <div class="header-bar">
    <p>Nephelocentaurus Development Project<br>Configuration Interface</p>
  </div>
  <div id="container">
    <div class="top-bar">
      <p>Designed by Yisu Fang<br>at the School of Engineering, University of Birmingham<br>Firmware Version 241028</p>
    </div>
    <div class="content">
      <div class="info-box">
        <h3>Privacy Disclaimer</h3>
        <p>We do not collect any personal data. <br>All user configurations are stored locally in flash memory.</p>
      </div>
      <form id="settingsForm" method='get' action='setting'>
        <h2>Internet Setup</h2>
		  <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
	<path fill="currentColor" d="M11 14c0-3.36 2.64-6 6-6c2.2 0 4.08 1.13 5.13 2.86L24 8.98A16.88 16.88 0 0 0 12 4C7.31 4 3.07 5.9 0 8.98L12 21l1.86-1.87C12.14 18.09 11 16.2 11 14" />
	<path fill="currentColor" d="M21 14c0-2.24-1.76-4-4-4s-4 1.76-4 4s1.76 4 4 4c.75 0 1.44-.21 2.03-.56L21.59 20L23 18.59l-2.56-2.56c.35-.59.56-1.28.56-2.03m-6 0c0-1.12.88-2 2-2s2 .88 2 2s-.88 2-2 2s-2-.88-2-2" />
</svg><div class="location-container">
        <h3>WIFI Name (SSID)</h3>
        <input id="ssid" name='ssid' type="text" maxlength="32" placeholder="Enter SSID">
        <p class="warning">Only supports 2.4G WiFi (a.k.a. Wi-fi 4, 802.11 b/g/n).</p></div>
<div class="location-container">
        <h3>WIFI Password</h3>
        <input id="pass" name='pass' type="text" maxlength="64" placeholder="Enter password">
        <p class="warning">Leave empty for an open WIFI.</p></div>
		  <div class="location-container">
    <h3>WPA Enterprise Account</h3>
    <input id="wpa_enterprise_user" name='wpa_enterprise_user' type="text" maxlength="64" placeholder="Account Name (usually email address)">
			  <p class="warning">Leave empty if using WPA Personal or open network.</p>
    <h3>WPA Enterprise Password</h3>
    <input id="wpa_enterprise_pass" name='wpa_enterprise_pass' type="text" maxlength="64" placeholder="Account Password">
    <p class="warning">Leave empty if using WPA Personal or open network.</p>
</div>
<br>
		  		  <div class="info-box">
			  <h3>Advanced Configuration</h3>
        <p>These are optional settings. Proceed with caution.</p>
        <button id="toggleRadioStreams">Toggle</button>
			  </div>
<div id="radioStreamsContent" style="display: none;">
        <h2>Location </h2>
		  <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
	<path fill="currentColor" d="M18.5 10c.5 0 1 .08 1.5.22V8l-6-6H6c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h9.91C14.7 20.41 13 17.78 13 15.5c0-3 2.5-5.5 5.5-5.5M13 3.5L18.5 9H13zm5.5 8.5c-1.9 0-3.5 1.6-3.5 3.5c0 2.6 3.5 6.5 3.5 6.5s3.5-3.9 3.5-6.5c0-1.9-1.6-3.5-3.5-3.5m0 4.8c-.7 0-1.2-.6-1.2-1.2c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2c.1.6-.5 1.2-1.2 1.2" />
</svg>
        <p>Location setting is used for fetching timezone and weather data. Defaults to Network IP Geolocation:</p>
<div class="location-container">
    <h3>Primary Latitude</h3>
    <input id="primary_lat" name='primary_lat' type="text" maxlength="32" placeholder="Optional">
    <p class="warning">Enter a float number, maximum 3-digit precision. E.g. 31.270.</p>
    <h3>Primary Longitude</h3>
    <input id="primary_lon" name='primary_lon' type="text" maxlength="32" placeholder="Optional">
    <p class="warning">Enter a float number, maximum 3-digit precision. E.g. 120.741.</p>
</div>

<div class="location-container">
    <h3>Secondary Latitude</h3>
    <input id="secondary_lat" name='secondary_lat' type="text" maxlength="32" placeholder="Optional">
    <h3>Secondary Longitude</h3>
    <input id="secondary_lon" name='secondary_lon' type="text" maxlength="32" placeholder="Optional">
</div>

<div class="location-container">
    <h3>Tertiary Latitude</h3>
    <input id="tertiary_lat" name='tertiary_lat' type="text" maxlength="32" placeholder="Optional">
    <h3>Tertiary Longitude</h3>
    <input id="tertiary_lon" name='tertiary_lon' type="text" maxlength="32" placeholder="Optional">
</div>
<br><br>
        <h2>API Keys</h2>
		  <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
	<path fill="currentColor" d="M9.41 20H6.5c-1.5 0-2.82-.5-3.89-1.57C1.54 17.38 1 16.09 1 14.58q0-1.95 1.17-3.48a5.25 5.25 0 0 1 3.08-1.95c.42-1.53 1.25-2.77 2.5-3.72C9 4.5 10.42 4 12 4c1.95 0 3.61.68 4.96 2.04C18.32 7.39 19 9.05 19 11c1.15.13 2.11.63 2.86 1.5c.64.73 1 1.56 1.1 2.5H18a5.01 5.01 0 0 0-4-2c-2.8 0-5 2.2-5 5c0 .72.15 1.39.41 2M23 17v2h-2v2h-2v-2h-2.2c-.4 1.2-1.5 2-2.8 2c-1.7 0-3-1.3-3-3s1.3-3 3-3c1.3 0 2.4.8 2.8 2zm-8 1c0-.5-.4-1-1-1s-1 .5-1 1s.4 1 1 1s1-.5 1-1" />
</svg>
        <p>Default keys may be discontinued in the future. Use your own keys if default keys stop working.</p>
<div class="location-container">
        <h3>OpenWeatherMap API v3.0 Key</h3>
        <input id="weather_api_key" name='weather_api_key' type="text" maxlength="64" placeholder="Optional"></div>
<div class="location-container">
        <h3>ExchangeRate-API Key</h3>
        <input id="exchange_api_key" name='exchange_api_key' type="text" maxlength="64" placeholder="Optional"></div>
<br><br><br>
</div>
		  <div class="info-box">
			  <h3>Save and Reboot</h3>
        <p>After saving, the current session will be terminated.</p>
        <input type="submit" value="Save Configuration">
			  </div>
      </form>
		<div class="info-box">
        <h3>Factory Settings</h3>
        <p>You can always reset all parameters.</p>
        <form action="/reset" method="get">
          <input type="submit" value="Purge Parameters">
        </form>
      </div>
		<p class="warning">Nephelocentaurus Development Project <br>Â© Yisu Fang, 2024</p>
    </div>
  </div>
  <script>
document.getElementById('settingsForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  var formData = {};
  new FormData(this).forEach((value, key) => {
    formData[key] = value;
  });
  
  fetch('/setting', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(formData)
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      alert('Settings saved successfully: ' + JSON.stringify(data.config));
    } else {
      alert('Error: ' + data.message);
    }
  })
  .catch(error => {
    alert('Error: ' + error.message);
  });
});
document.addEventListener('DOMContentLoaded', function() {
  const toggleButton = document.getElementById('toggleRadioStreams');
  const content = document.getElementById('radioStreamsContent');

  toggleButton.addEventListener('click', function(e) {
    e.preventDefault(); // Prevent form submission
    if (content.style.display === 'none') {
      content.style.display = 'block';
      toggleButton.textContent = 'Collapse Content';
    } else {
      content.style.display = 'none';
      toggleButton.textContent = 'Expand Content';
    }
  });
});
  </script>
</body>
</html>